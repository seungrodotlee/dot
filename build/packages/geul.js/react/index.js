"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("react");var vt=function(t,e){return vt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},vt(t,e)};function V(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vt(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Ct(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function et(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],u;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return o}function nt(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function C(t){return typeof t=="function"}function he(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ct=he(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function mt(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ot=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var u=this._parentage;if(u)if(this._parentage=null,Array.isArray(u))try{for(var s=Ct(u),c=s.next();!c.done;c=s.next()){var y=c.value;y.remove(this)}}catch(p){e={error:p}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}else u.remove(this);var d=this.initialTeardown;if(C(d))try{d()}catch(p){o=p instanceof ct?p.errors:[p]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var f=Ct(l),a=f.next();!a.done;a=f.next()){var b=a.value;try{jt(b)}catch(p){o=o??[],p instanceof ct?o=nt(nt([],et(o)),et(p.errors)):o.push(p)}}}catch(p){r={error:p}}finally{try{a&&!a.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(o)throw new ct(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)jt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&mt(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&mt(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}();ot.EMPTY;function Yt(t){return t instanceof ot||t&&"closed"in t&&C(t.remove)&&C(t.add)&&C(t.unsubscribe)}function jt(t){C(t)?t():t.unsubscribe()}var Jt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lt={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,nt([t,e],et(n)))},clearTimeout:function(t){var e=Lt.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function ye(t){Lt.setTimeout(function(){throw t})}function Mt(){}function de(t){t()}var $t=function(t){V(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Yt(n)&&n.add(r)):r.destination=be,r}return e.create=function(n,r,i){return new bt(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(ot),pe=Function.prototype.bind;function at(t,e){return pe.call(t,e)}var ve=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){X(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){X(r)}else X(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){X(n)}},t}(),bt=function(t){V(e,t);function e(n,r,i){var o=t.call(this)||this,u;if(C(n)||!n)u={next:n??void 0,error:r??void 0,complete:i??void 0};else{var s;o&&Jt.useDeprecatedNextContext?(s=Object.create(n),s.unsubscribe=function(){return o.unsubscribe()},u={next:n.next&&at(n.next,s),error:n.error&&at(n.error,s),complete:n.complete&&at(n.complete,s)}):u=n}return o.destination=new ve(u),o}return e}($t);function X(t){ye(t)}function me(t){throw t}var be={closed:!0,next:Mt,error:me,complete:Mt},ge=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function we(t){return t}function Se(t){return t.length===0?we:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Qt=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=xe(e)?e:new bt(e,n,r);return de(function(){var u=i,s=u.operator,c=u.source;o.add(s?s.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=Rt(n),new n(function(i,o){var u=new bt({next:function(s){try{e(s)}catch(c){o(c),u.unsubscribe()}},error:o,complete:i});r.subscribe(u)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[ge]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Se(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=Rt(e),new e(function(r,i){var o;n.subscribe(function(u){return o=u},function(u){return i(u)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function Rt(t){var e;return(e=t??Jt.Promise)!==null&&e!==void 0?e:Promise}function Ie(t){return t&&C(t.next)&&C(t.error)&&C(t.complete)}function xe(t){return t&&t instanceof $t||Ie(t)&&Yt(t)}function Ae(t){return C(t==null?void 0:t.lift)}function Ot(t){return function(e){if(Ae(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function zt(t,e,n,r,i){return new Ee(t,e,n,r,i)}var Ee=function(t){V(e,t);function e(n,r,i,o,u,s){var c=t.call(this,n)||this;return c.onFinalize=u,c.shouldUnsubscribe=s,c._next=r?function(y){try{r(y)}catch(d){n.error(d)}}:t.prototype._next,c._error=o?function(y){try{o(y)}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(y){n.error(y)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}($t),Pe={now:function(){return Date.now()},delegate:void 0},$e=function(t){V(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(ot),gt={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,nt([t,e],et(n)))},clearInterval:function(t){var e=gt.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},Oe=function(t){V(e,t);function e(n,r){var i=t.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,u=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(u,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(u,this.id,r),this},e.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),gt.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&gt.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(u){i=!0,o=u||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,mt(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}($e),Bt=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Pe.now,t}(),_e=function(t){V(e,t);function e(n,r){r===void 0&&(r=Bt.now);var i=t.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},e}(Bt),Ht=new _e(Oe),ke=Ht,Te=new Qt(function(t){return t.complete()});function Ce(t){return t&&C(t.schedule)}function je(t){return t instanceof Date&&!isNaN(t)}function lt(t,e){return Ot(function(n,r){var i=0;n.subscribe(zt(r,function(o){r.next(t.call(e,o,i++))}))})}function Me(t,e,n){t===void 0&&(t=0),n===void 0&&(n=ke);var r=-1;return e!=null&&(Ce(e)?n=e:r=e),new Qt(function(i){var o=je(t)?+t-n.now():t;o<0&&(o=0);var u=0;return n.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function ft(t,e){return t===void 0&&(t=0),e===void 0&&(e=Ht),t<0&&(t=0),Me(t,t,e)}function ht(t){return t<=0?function(){return Te}:Ot(function(e,n){var r=0;e.subscribe(zt(n,function(i){++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function yt(t){return Ot(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function A(t){return typeof(t==null?void 0:t[Symbol.iterator])=="function"}function I(t){return typeof(t==null?void 0:t[Symbol.asyncIterator])=="function"}const Re=function*(){},ut=t=>t instanceof Promise||t!==null&&typeof t=="object"&&typeof t.then=="function"&&typeof t.catch=="function",wt=t=>typeof t=="number",_t=t=>typeof t=="string";class H extends Error{constructor(e=H.MESSAGE){super(e)}}H.MESSAGE=`'Iterable' can not used with async function.
If you want to deal with async function, see: [toAsync](https://fxts.dev/docs/toAsync)`;function Be(t,e){const n=e[Symbol.iterator]();return{next(){const{done:r,value:i}=n.next();if(r)return{done:!0,value:void 0};const o=t(i);if(ut(o))throw new H;return{done:!1,value:o}},[Symbol.iterator](){return this}}}function Fe(t,e){const n=e[Symbol.asyncIterator]();return{async next(r){const{done:i,value:o}=await n.next(r);return i?{done:i,value:o}:{done:!1,value:await t(o)}},[Symbol.asyncIterator](){return this}}}function $(t,e){if(e===void 0)return n=>$(t,n);if(A(e))return Be(t,e);if(I(e))return Fe(t,e);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}const De=(t,e)=>ut(t)?t.then(e):e(t),J=De;function Ft(t,e,n){for(const r of n)e=t(e,r);return e}async function Dt(t,e,n){for await(const r of n)e=await J(e,i=>t(i,r));return e}function G(t,e,n){if(n===void 0){if(e===void 0)return r=>G(t,r);if(A(e)){const r=e[Symbol.iterator](),{done:i,value:o}=r.next();if(i)throw new TypeError("'reduce' of empty iterable with no initial value");return Ft(t,o,{[Symbol.iterator](){return r}})}if(I(e)){const r=e[Symbol.asyncIterator]();return r.next().then(({done:i,value:o})=>{if(i)throw new TypeError("'reduce' of empty iterable with no initial value");return Dt(t,o,{[Symbol.asyncIterator](){return r}})})}throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}if(A(n))return Ft(t,e,n);if(I(n))return Dt(t,Promise.resolve(e),n);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function _(t,...e){return G(J,t,e)}function*St(t,e,n=1){if(e===void 0)return yield*St(0,t);if(n<0)for(;t>e;)yield t,t+=n;else for(;t<e;)yield t,t+=n}class st{constructor(e){this.length=e}static of(e){return new st(e)}}const N=t=>t instanceof st;function q(t,e){if(e===void 0)return a=>q(t,a);if(!Number.isFinite(t)||t<=0)throw new RangeError("'length' must be positive integer");if(!I(e))throw new TypeError("'iterable' must be type of AsyncIterable");const n=e[Symbol.asyncIterator](),r=[];let i=Promise.resolve(),o=0,u=0,s=!1,c=!1;const y=[],d=()=>{for(;r.length>0&&o>u;){const a=r.shift(),[b,p]=y.shift();if(a.status==="fulfilled")u++,b(a.value),a.value.done&&(s=!0);else{p(a.reason),s=!0;break}}},l=()=>{if(c)i=i.then(()=>void(!s&&o>u&&l()));else{const a=Promise.allSettled(Array.from({length:t},()=>n.next(st.of(t))));c=!0,i=i.then(()=>a).then(b=>{r.push(...b),c=!1,f()})}};function f(){s||o===u||(r.length>0?d():l())}return{[Symbol.asyncIterator](){return this},next(){return o++,s?{done:!0,value:void 0}:new Promise((a,b)=>{y.push([a,b]),f()})}}}async function Ue(t){const e=[];for await(const n of t)e.push(n);return e}function R(t){return I(t)?Ue(t):A(t)?Array.from(t):[]}async function*Ke(t,e){for await(const n of e)await t(n)&&(yield n)}function Ge(t){const e=t[Symbol.asyncIterator](),n=[],r=[];let i=!1,o=0,u=0,s=Promise.resolve();function c(l){const f=e.next(l);s=s.then(()=>f).then(({done:a,value:b})=>{if(a){for(;n.length>0;){const[g]=n.shift();g({done:!0,value:void 0})}return void(i=!0)}const[p,W]=b;p&&r.push(W),d(l)}).catch(a=>{for(i=!0;n.length>0;){const[,b]=n.shift();b(a)}})}function y(){for(;r.length>0&&o>u;){const l=r.shift(),[f]=n.shift();f({done:!1,value:l}),u++}}function d(l){i||o===u||(r.length>0?y():c(l))}return{async next(l){return o++,i?{done:!0,value:void 0}:new Promise((f,a)=>{n.push([f,a]),d(l)})},[Symbol.asyncIterator](){return this}}}function Ve(t,e){const n=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return this},async next(r){const{done:i,value:o}=await n.next(r);return i?{done:!0,value:void 0}:J(t(o),u=>({done:i,value:[!!u,o]}))}}}function qe(t,e){let n;return{async next(r){return n===void 0&&(n=N(r)?Ge(q(r.length,Ve(t,e))):Ke(t,e)),n.next(r)},[Symbol.asyncIterator](){return this}}}function*We(t,e){for(const n of e){const r=t(n);if(ut(r))throw new H;r&&(yield n)}}function Nt(t,e){if(e===void 0)return n=>Nt(t,n);if(A(e))return We(t,e);if(I(e))return qe(t,e);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}const Ye=t=>Array.isArray(t),Xt=Ye;function Je(t,e){const n=G((r,i)=>r==""?`${i}`:`${r}${t}${i}`,"",e);return n==null?"":_t(n)?n:String(n)}function Le(t,e){return G((n,r)=>n==""?`${r}`:`${n}${t}${r}`,"",e).then(n=>n==null?"":_t(n)?n:String(n))}function K(t,e){if(e===void 0)return n=>K(t,n);if(Array.isArray(e)&&e.length===0)return"";if(A(e))return Je(t,e);if(I(e))return Le(t,e);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function Zt(t){if(Xt(t)||_t(t))return t[t.length-1];if(A(t))return G((e,n)=>n,t);if(I(t))return G((e,n)=>n,t);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function te(t,e){if(e!==null)return e===void 0?n=>te(t,n):e[t]}function ee(t,e){if(e===void 0)return n=>ee(t,n);if(Xt(e))return e.sort(t);if(A(e))return J(R(e),n=>n.sort(t));if(I(e))return J(R(e),n=>n.sort(t));throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function*Qe(t,e){yield*e,yield t}function Ut(t,e){const n=e[Symbol.asyncIterator]();let r=!1;return{[Symbol.asyncIterator](){return this},async next(){if(r)return{done:!0,value:void 0};const{value:i,done:o}=await n.next();return r?{done:!0,value:void 0}:o?(r=!0,{done:!1,value:await t}):{done:o,value:i}}}}function ze(t,e){let n=null;return{[Symbol.asyncIterator](){return this},async next(r){return n===null&&(n=N(r)?Ut(t,q(r.length,e)):Ut(t,e)),n.next(r)}}}function ne(t,e){if(e===void 0)return n=>ne(t,n);if(I(e))return ze(ut(t)?t:Promise.resolve(t),e);if(A(e))return Qe(t,e);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function*He(t,e){yield*t,yield*e}function Ne(t,e){let n=!1;const r=t[Symbol.asyncIterator](),i=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return this},async next(o){const u=n?i:r,{done:s,value:c}=await u.next(o);return s?(u===r&&(n=!0),i.next(o)):{done:s,value:c}}}}function Kt(t){if(I(t))return t;const e=t[Symbol.iterator]();return{[Symbol.asyncIterator](){return e}}}function re(t,e){if(e===void 0)return n=>re(t,n);if(I(t)||I(e))return Ne(Kt(t),Kt(e));if(A(t)&&A(e))return He(t,e);throw new TypeError("'iterable1','iterable2' must be type of Iterable or AsyncIterable")}function*It(t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(yield[e,t[e]])}const kt=function(t){return typeof t!="string"&&A(t)};function ie(t,e){const r=[t[Symbol.iterator]()];return{[Symbol.iterator](){return this},next(){const i=Zt(r);if(!i)return{done:!0,value:void 0};const{value:o,done:u}=i.next();return u?(r.pop(),this.next()):kt(o)&&r.length<e+1?(r.push(o[Symbol.iterator]()),this.next()):{done:!1,value:o}}}}function Xe(t,e){const n=t[Symbol.asyncIterator]();let r=Promise.resolve(),i=Re(),o=!1;const u=[],s=async()=>{const{done:l,value:f}=await n.next();return l?!1:(kt(f)?i=re(ie(f,e-1),i):i=ne(f,i),!0)},c=async()=>{if(o)return{done:!0,value:void 0};const{value:l,done:f}=i.next();return f?await s()?c():{done:!0,value:void 0}:{done:!1,value:l}},y=({done:l,value:f})=>{if(l||o){for(;u.length>0;){const[b]=u.shift();b({done:!0,value:void 0})}return}const[a]=u.shift();a({done:l,value:f})},d=l=>{o=!0;const[f,a]=u.shift();a(l)};return{[Symbol.asyncIterator](){return this},async next(){return new Promise((l,f)=>{u.push([l,f]),r=r.then(()=>c()).then(y).catch(d)})}}}function Ze(t,e){const r=[t[Symbol.asyncIterator]()];return{[Symbol.asyncIterator](){return this},async next(){const i=Zt(r);if(!i)return{done:!0,value:void 0};const{value:o,done:u}=await i.next();return u?(r.pop(),this.next()):kt(o)&&r.length<e+1?(r.push(o[Symbol.iterator]()),this.next()):{done:!1,value:o}}}}function tn(t,e){let n=null;return{async next(r){return n===null&&(n=N(r)?Xe(q(r.length,t),e):Ze(t,e)),n.next(r)},[Symbol.asyncIterator](){return this}}}function dt(t,e=1){if(A(t))return ie(t,e);if(I(t))return tn(t,e);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function oe(t,e){if(e===void 0)return n=>dt($(t,n));if(A(e)||I(e))return dt($(t,e));throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function*en(t,e,n){let r=0;for(const i of n)r>=t&&r<e&&(yield i),r+=1}async function*Gt(t,e,n){let r=0;for await(const i of n)r>=t&&r<e&&(yield i),r+=1}function nn(t,e,n){let r;return{[Symbol.asyncIterator](){return this},async next(i){return r===void 0&&(r=N(i)?Gt(t,e,q(i.length,n)):Gt(t,e,n)),r.next(i)}}}function Y(t,e,n){if(!wt(t)||!wt(e))throw new TypeError("'start' and 'end' must be type of number");if(A(n))return en(t,e,n);if(I(n))return nn(t,e,n);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}function pt(t,e,n){return n===void 0?e===void 0?r=>Y(t,1/0,r):A(e)||I(e)?Y(t,1/0,e):wt(e)?r=>Y(t,e,r):r=>Y(0,1/0,r):Y(t,e,n)}function*rn(t,e){if(t==="")return yield*e;let n="",r="";for(r of e)r===t?(yield n,n=""):n+=r;r===t?yield"":n.length>0&&(yield n)}async function*Vt(t,e){if(t==="")return yield*e;let n="",r="";for await(r of e)r===t?(yield n,n=""):n+=r;r===t?yield"":n.length>0&&(yield n)}function on(t,e){let n;return{async next(r){return n===void 0&&(n=N(r)?Vt(t,q(r.length,e)):Vt(t,e)),n.next(r)},[Symbol.asyncIterator](){return this}}}function ue(t,e){if(e===void 0)return n=>ue(t,n);if(A(e))return rn(t,e);if(I(e))return on(t,e);throw new TypeError("'iterable' must be type of Iterable or AsyncIterable")}const P=Symbol.for("@ts-pattern/matcher"),se=Symbol.for("@ts-pattern/isVariadic"),rt="@ts-pattern/anonymous-select-key",xt=t=>!!(t&&typeof t=="object"),Z=t=>t&&!!t[P],x=(t,e,n)=>{if(Z(t)){const r=t[P](),{matched:i,selections:o}=r.match(e);return i&&o&&Object.keys(o).forEach(u=>n(u,o[u])),i}if(xt(t)){if(!xt(e))return!1;if(Array.isArray(t)){if(!Array.isArray(e))return!1;let r=[],i=[],o=[];for(const u of t.keys()){const s=t[u];Z(s)&&s[se]?o.push(s):o.length?i.push(s):r.push(s)}if(o.length){if(o.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(e.length<r.length+i.length)return!1;const u=e.slice(0,r.length),s=i.length===0?[]:e.slice(-i.length),c=e.slice(r.length,i.length===0?1/0:-i.length);return r.every((y,d)=>x(y,u[d],n))&&i.every((y,d)=>x(y,s[d],n))&&(o.length===0||x(o[0],c,n))}return t.length===e.length&&t.every((u,s)=>x(u,e[s],n))}return Object.keys(t).every(r=>{const i=t[r];return(r in e||Z(o=i)&&o[P]().matcherType==="optional")&&x(i,e[r],n);var o})}return Object.is(e,t)},O=t=>{var e,n,r;return xt(t)?Z(t)?(e=(n=(r=t[P]()).getSelectionKeys)==null?void 0:n.call(r))!=null?e:[]:Array.isArray(t)?L(t,O):L(Object.values(t),O):[]},L=(t,e)=>t.reduce((n,r)=>n.concat(e(r)),[]);function un(...t){if(t.length===1){const[e]=t;return n=>x(e,n,()=>{})}if(t.length===2){const[e,n]=t;return x(e,n,()=>{})}throw new Error(`isMatching wasn't given the right number of arguments: expected 1 or 2, received ${t.length}.`)}function E(t){return Object.assign(t,{optional:()=>Tt(t),and:e=>v(t,e),or:e=>ce(t,e),select:e=>e===void 0?Q(t):Q(e,t)})}function At(t){return Object.assign((e=>Object.assign(e,{[Symbol.iterator](){let n=0;const r=[{value:Object.assign(e,{[se]:!0}),done:!1},{done:!0,value:void 0}];return{next:()=>{var i;return(i=r[n++])!=null?i:r.at(-1)}}}}))(t),{optional:()=>At(Tt(t)),select:e=>At(e===void 0?Q(t):Q(e,t))})}function Tt(t){return E({[P]:()=>({match:e=>{let n={};const r=(i,o)=>{n[i]=o};return e===void 0?(O(t).forEach(i=>r(i,void 0)),{matched:!0,selections:n}):{matched:x(t,e,r),selections:n}},getSelectionKeys:()=>O(t),matcherType:"optional"})})}const sn=(t,e)=>{for(const n of t)if(!e(n))return!1;return!0},cn=(t,e)=>{for(const[n,r]of t.entries())if(!e(r,n))return!1;return!0};function v(...t){return E({[P]:()=>({match:e=>{let n={};const r=(i,o)=>{n[i]=o};return{matched:t.every(i=>x(i,e,r)),selections:n}},getSelectionKeys:()=>L(t,O),matcherType:"and"})})}function ce(...t){return E({[P]:()=>({match:e=>{let n={};const r=(i,o)=>{n[i]=o};return L(t,O).forEach(i=>r(i,void 0)),{matched:t.some(i=>x(i,e,r)),selections:n}},getSelectionKeys:()=>L(t,O),matcherType:"or"})})}function h(t){return{[P]:()=>({match:e=>({matched:!!t(e)})})}}function Q(...t){const e=typeof t[0]=="string"?t[0]:void 0,n=t.length===2?t[1]:typeof t[0]=="string"?void 0:t[0];return E({[P]:()=>({match:r=>{let i={[e??rt]:r};return{matched:n===void 0||x(n,r,(o,u)=>{i[o]=u}),selections:i}},getSelectionKeys:()=>[e??rt].concat(n===void 0?[]:O(n))})})}function j(t){return typeof t=="number"}function D(t){return typeof t=="string"}function B(t){return typeof t=="bigint"}const ae=E(h(function(t){return!0})),an=ae,U=t=>Object.assign(E(t),{startsWith:e=>{return U(v(t,(n=e,h(r=>D(r)&&r.startsWith(n)))));var n},endsWith:e=>{return U(v(t,(n=e,h(r=>D(r)&&r.endsWith(n)))));var n},minLength:e=>U(v(t,(n=>h(r=>D(r)&&r.length>=n))(e))),maxLength:e=>U(v(t,(n=>h(r=>D(r)&&r.length<=n))(e))),includes:e=>{return U(v(t,(n=e,h(r=>D(r)&&r.includes(n)))));var n},regex:e=>{return U(v(t,(n=e,h(r=>D(r)&&!!r.match(n)))));var n}}),ln=U(h(D)),M=t=>Object.assign(E(t),{between:(e,n)=>M(v(t,((r,i)=>h(o=>j(o)&&r<=o&&i>=o))(e,n))),lt:e=>M(v(t,(n=>h(r=>j(r)&&r<n))(e))),gt:e=>M(v(t,(n=>h(r=>j(r)&&r>n))(e))),lte:e=>M(v(t,(n=>h(r=>j(r)&&r<=n))(e))),gte:e=>M(v(t,(n=>h(r=>j(r)&&r>=n))(e))),int:()=>M(v(t,h(e=>j(e)&&Number.isInteger(e)))),finite:()=>M(v(t,h(e=>j(e)&&Number.isFinite(e)))),positive:()=>M(v(t,h(e=>j(e)&&e>0))),negative:()=>M(v(t,h(e=>j(e)&&e<0)))}),fn=M(h(j)),F=t=>Object.assign(E(t),{between:(e,n)=>F(v(t,((r,i)=>h(o=>B(o)&&r<=o&&i>=o))(e,n))),lt:e=>F(v(t,(n=>h(r=>B(r)&&r<n))(e))),gt:e=>F(v(t,(n=>h(r=>B(r)&&r>n))(e))),lte:e=>F(v(t,(n=>h(r=>B(r)&&r<=n))(e))),gte:e=>F(v(t,(n=>h(r=>B(r)&&r>=n))(e))),positive:()=>F(v(t,h(e=>B(e)&&e>0))),negative:()=>F(v(t,h(e=>B(e)&&e<0)))}),hn=F(h(B)),yn=E(h(function(t){return typeof t=="boolean"})),dn=E(h(function(t){return typeof t=="symbol"})),pn=E(h(function(t){return t==null}));var w={__proto__:null,matcher:P,optional:Tt,array:function(...t){return At({[P]:()=>({match:e=>{if(!Array.isArray(e))return{matched:!1};if(t.length===0)return{matched:!0};const n=t[0];let r={};if(e.length===0)return O(n).forEach(o=>{r[o]=[]}),{matched:!0,selections:r};const i=(o,u)=>{r[o]=(r[o]||[]).concat([u])};return{matched:e.every(o=>x(n,o,i)),selections:r}},getSelectionKeys:()=>t.length===0?[]:O(t[0])})})},set:function(...t){return E({[P]:()=>({match:e=>{if(!(e instanceof Set))return{matched:!1};let n={};if(e.size===0)return{matched:!0,selections:n};if(t.length===0)return{matched:!0};const r=(o,u)=>{n[o]=(n[o]||[]).concat([u])},i=t[0];return{matched:sn(e,o=>x(i,o,r)),selections:n}},getSelectionKeys:()=>t.length===0?[]:O(t[0])})})},map:function(...t){return E({[P]:()=>({match:e=>{if(!(e instanceof Map))return{matched:!1};let n={};if(e.size===0)return{matched:!0,selections:n};const r=(s,c)=>{n[s]=(n[s]||[]).concat([c])};if(t.length===0)return{matched:!0};var i;if(t.length===1)throw new Error(`\`P.map\` wasn't given enough arguments. Expected (key, value), received ${(i=t[0])==null?void 0:i.toString()}`);const[o,u]=t;return{matched:cn(e,(s,c)=>{const y=x(o,c,r),d=x(u,s,r);return y&&d}),selections:n}},getSelectionKeys:()=>t.length===0?[]:[...O(t[0]),...O(t[1])]})})},intersection:v,union:ce,not:function(t){return E({[P]:()=>({match:e=>({matched:!x(t,e,()=>{})}),getSelectionKeys:()=>[],matcherType:"not"})})},when:h,select:Q,any:ae,_:an,string:ln,number:fn,bigint:hn,boolean:yn,symbol:dn,nullish:pn,instanceOf:function(t){return E(h(function(e){return n=>n instanceof e}(t)))},shape:function(t){return E(h(un(t)))}};const Et={matched:!1,value:void 0};function z(t){return new it(t,Et)}class it{constructor(e,n){this.input=void 0,this.state=void 0,this.input=e,this.state=n}with(...e){if(this.state.matched)return this;const n=e[e.length-1],r=[e[0]];let i;e.length===3&&typeof e[1]=="function"?i=e[1]:e.length>2&&r.push(...e.slice(1,e.length-1));let o=!1,u={};const s=(y,d)=>{o=!0,u[y]=d},c=!r.some(y=>x(y,this.input,s))||i&&!i(this.input)?Et:{matched:!0,value:n(o?rt in u?u[rt]:u:this.input,this.input)};return new it(this.input,c)}when(e,n){if(this.state.matched)return this;const r=!!e(this.input);return new it(this.input,r?{matched:!0,value:n(this.input,this.input)}:Et)}otherwise(e){return this.state.matched?this.state.value:e(this.input)}exhaustive(){if(this.state.matched)return this.state.value;let e;try{e=JSON.stringify(this.input)}catch{e=this.input}throw new Error(`Pattern matching error: no pattern matches value ${e}`)}run(){return this.exhaustive()}returnType(){return this}}const Pt={initial:["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],middle:["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],final:["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"]},qt=t=>_(t,It,$(([e,n])=>[+e,n]),oe(([e,n])=>z(_(St(3),$(r=>t[e+r]||""),$(r=>r.charCodeAt(0)),R)).with([w.not(w.number.between(12623,12643)),...w.array()],()=>[n]).with([w._,w.not(w.number.between(12593,12622)),w._],()=>[n,""]).with([w._,w.number.between(12593,12622),w.number.between(12623,12643)],()=>[n,""]).otherwise(()=>[n])),R,It,$(([e,n])=>[+e,n]),R,e=>G((n,[r,i])=>n.skip>0?{...n,skip:n.skip-1}:z(_(St(3),$(o=>((e[r+o]||[])[1]||"").charCodeAt(0)),R)).with([w.number.between(12593,12622),w.number.between(12623,12643),w._],o=>({skip:2,result:[...n.result,_(o,$(u=>Number.isNaN(u)?"":String.fromCharCode(u)),R,([u,s,c])=>String.fromCharCode(44032+Pt.initial.indexOf(u)*588+(s.charCodeAt(0)-12623)*28+Pt.final.indexOf(c)))]})).otherwise(()=>({skip:0,result:[...n.result,i]})),{skip:0,result:[]},e),te("result"),K("")),Wt=t=>_(t,ue(""),oe(e=>z(e).with(w.string.regex(/[가-힣]/),()=>_(e.charCodeAt(0)-44032,n=>_(Math.floor(n/588),r=>({initial:r,middle:Math.floor((n-r*588)/28),final:Math.floor(n%28)}),r=>_(r,It,$(([i,o])=>Pt[i][o]))))).otherwise(()=>[e])),Nt(e=>e!==""),R);function tt(t,e){return z(e).with(w.nullish,()=>n=>tt(t,n)).with(w.when(n=>typeof n[0]=="object"),n=>_(t,$(r=>JSON.stringify(r)),K("")).includes(_(n,$(r=>JSON.stringify(r)),K("")))).otherwise(n=>K("",t).includes(K("",n)))}const le=(t,{speed:e=50,initial:n="",decomposeOnBackspace:r})=>{const i=m.useMemo(()=>Wt(t),[t]),[o,u]=m.useState(n),[s,c]=m.useState(!1),[y,d]=m.useState(!1);m.useEffect(()=>{s||u(n)},[s,n]);const l=()=>{c(!1),u(n)},f=m.useCallback((g,S,k)=>{c(!0),ft(e).pipe(lt(T=>_(S,pt(0,g.length+T),R)),ht(S.length-g.length+1),yt(()=>k&&k())).subscribe(T=>u(qt(T)))},[e]),a=m.useCallback((g,S,k)=>{c(!0),ft(e).pipe(lt(T=>_(g,pt(0,g.length-T),R)),ht(g.length-S.length+1),yt(()=>k&&k())).subscribe(T=>u(qt(T)))},[e]),b=m.useCallback((g,S,k)=>{ft(e).pipe(lt(T=>pt(0,g.length-T,g.split(""))),ht(g.length-S.length+1),yt(()=>k&&k())).subscribe(T=>u(K("",T)))},[e]),p=m.useCallback(g=>()=>{d(!1),g&&g()},[]),W=m.useCallback(g=>{d(!0),z({isFired:s,initialPhonemes:Wt(n),decomposeOnBackspace:r}).with({isFired:!0},()=>console.warn(`
            geul(${t}) is already excuted.
            If you want to re-run it. call 'reset' method first.
          `.replace(/^ +/gm,"").trim())).with({initialPhonemes:w.when(tt(i))},({initialPhonemes:S})=>f(S,i,p(g))).with({initialPhonemes:w.when(S=>tt(S,i)),decomposeOnBackspace:!0},({initialPhonemes:S})=>a(S,i,p(g))).with({initialPhonemes:w.when(S=>tt(S,i)),decomposeOnBackspace:w.union(w.nullish,!1)},()=>b(n,t,p(g))).otherwise(()=>_([n,t],ee((S,k)=>S.length-k.length),([S,k])=>{throw Error(`'${S}' is not part of '${k}'`)}))},[s,n,r,i,t,f,a,b,p]);return{geul:o,isRunning:y,reset:l,run:W}},fe=(t,{speed:e=50,decomposeOnBackspace:n})=>{const[r,i]=m.useState(),o=m.useRef(),[u,s]=m.useState(""),c=m.useRef(""),{geul:y,isRunning:d,run:l,reset:f}=le(u,{speed:e,initial:r||t,decomposeOnBackspace:n}),a=m.useCallback(p=>{s(p)},[]),b=m.useCallback(()=>{i(void 0)},[]);return m.useEffect(()=>{o.current!==r&&(o.current=r,f())},[r,f]),m.useEffect(()=>{c.current!==u&&(c.current=u,l(()=>i(u)))},[u,l]),{geul:y,isRunning:d,reset:b,run:a}},vn=(t,{speed:e,initial:n="",decomposeOnBackspace:r},i=[])=>{const[o,u]=m.useState(-1),s=m.useRef(-1),{geul:c,isRunning:y,run:d,reset:l}=fe(n,{speed:e,decomposeOnBackspace:r}),f=m.useMemo(()=>o+1===t.length,[o,...i]),a=()=>{if(f){console.warn("Every geul steps already executed!");return}u(g=>g+1)},[b,p]=m.useState(!1),W=()=>{u(-1),p(!0)};return m.useEffect(()=>{if(s.current!==o){if(s.current=o,b){l(),p(!1);return}d(t[o])}},[t,o,d,l,b]),{geul:c,isRunning:y,isEnded:f,next:a,reset:W}};exports.useDynamicGeul=fe;exports.useGeul=le;exports.useGeulPipe=vn;
